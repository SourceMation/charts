{{- if .Values.simulator.enabled }}
apiVersion: adcs.certmanager.csf.nokia.com/v1
kind: ClusterAdcsIssuer
metadata:
  name: {{ .Values.simulator.clusterIssuerName | default "adcs-sim-adcsclusterissuer" }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "chart.labels" . | nindent 4 }}
spec:
  caBundle: |
    {{- .Values.simulator.caBundle | default "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tDQpNSUlGMXpDQ0E3K2dBd0lCQWdJVUtQRTNLcmthVFBDSktxWEtZOHB0dG1qMTUyVXdEUVlKS29aSWh2Y05BUUVMDQpCUUF3WkRFTE1Ba0dBMVVFQmhNQ1VFd3hEekFOQmdOVkJBZ01CbGRoY25OaGR6RVBNQTBHQTFVRUJ3d0dUVzl5DQpaRzl5TVJBd0RnWURWUVFLREFkQlJFTlRVMGxOTVFzd0NRWURWUVFMREFKSlZERVVNQklHQTFVRUF3d0xaWGhoDQpiWEJzWlM1amIyMHdIaGNOTWpNeE1qTXhNVEkxTWpRMVdoY05Nek14TWpJNE1USTFNalExV2pCa01Rc3dDUVlEDQpWUVFHRXdKUVRERVBNQTBHQTFVRUNBd0dWMkZ5YzJGM01ROHdEUVlEVlFRSERBWk5iM0prYjNJeEVEQU9CZ05WDQpCQW9NQjBGRVExTlRTVTB4Q3pBSkJnTlZCQXNNQWtsVU1SUXdFZ1lEVlFRRERBdGxlR0Z0Y0d4bExtTnZiVENDDQpBaUl3RFFZSktvWklodmNOQVFFQkJRQURnZ0lQQURDQ0Fnb0NnZ0lCQUxrbldhU1pTZk9uMzNHbERKaEU1MUl3DQpFNCtGRTZiL0MwUG9ZdGErb2U4N1NNZDE0NnhkakJDYitBdE5ZUW5wdkVuVkcyYThHMW1qNHJIeGtUb0IvUnhjDQpyOXdtMlRaNXREMUlwT1NERXBnSVlORXNYN2tmcnFLbEtBLzhyZWdGb0I3UUxrazVNc09tTW8rWU9yWmNjYlpKDQpVMTQ0V01tdTBubFIxbVhETUR0QTZET3lhSUhDVENQTWtWOEY3MFB3TkRDMFU3aktnV1NBSEFaRzRrUGpYTUpUDQptZHgxY3ZONXJLN3dLQzBjRit2RUdTdGNML3NTdk1aaEF0MDhuK3JxRUdudDdhV3RsYURBbUtVZTBKbDU4QnY4DQpab1g3NnZWVXcvLzdoRWhyTVFLbGNtL1VpNFVUSDBuaXlOOGg4U0pRbllYdzZWRk1hOHMxbzZTdTR4SG94dnI3DQpUMkxyVEphMi80UGNvbnlEOGxvNktZRHdPa0VqK3VkemltZ1U2Ty9sM0xFN1dSQWh4UmhQQjYzYWVjb3Awc2w4DQpObXo1TnR5bHZVMHhlVFdGZDRnT1RRRmdRTk45VmlNcXFuVWh4ZEI0cTNjS25NbTVESDdMcjJkckVFbENKcTNSDQp4dnFiclc5d3JvdGllNCtnMWZMdHk2Wkxua3NFdkdzMjZ1ZUFqbFhRREdTZU9kTThsTXR5VjZHbGtnSTY1bmhoDQpjYnNBY1I4dlRMSVRVYk82NkphTjNRbElrcHhNWTcwaGd2WVlUSS95eDNDVEhkbjZmaHBTbXJKbHhYOU5nMmdVDQphaHRRaU1QcXduLzcrMk1VVUVrQ2h6M1JXUVdTYnFFTTNERmk5TWlZSG1QL2NmQlFyR1hIWnZ3N25rMDI2dXVxDQpHS2xiSVVrK3BaVGJoTWdlUFlSM0FnTUJBQUdqZ1lBd2ZqQWRCZ05WSFE0RUZnUVVUS1pVQitFWFRWaVNuV2l2DQozWDRlUjd4dGl1RXdId1lEVlIwakJCZ3dGb0FVVEtaVUIrRVhUVmlTbldpdjNYNGVSN3h0aXVFd0R3WURWUjBUDQpBUUgvQkFVd0F3RUIvekFyQmdOVkhSRUVKREFpZ2d0bGVHRnRjR3hsTG1OdmJZSU5LaTVsZUdGdGNHeGxMbU52DQpiWWNFQ2dBQUFUQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUFjZDVncmV0aTQ0dWtqZ3hXU05vWUZzNkhaNjU5DQpPb3N0eEtMSDBqTUZTVVF4dnQ1dHJLOWtqdzI3aFdZZzVDNzNXSWMzWGxlL2J5UFN5a1RRc3hxOXRpOTZxZTBUDQpVNCtoc2ZkRlZla3FsTjgzaDNwWi9Mb0Q5eUVsWDJ2ekZrTGFpcW4vN0dXZGY2bTQ3MnpwZ1h4Nm9QbFA2R1RWDQpuOXBicVBoYnV0TVNBanBvbXJSNVNpdWVQb3NWaVYxVWpQdjZRVXZLV3VTK0dPUDBIelkrS3UxeWZlejEvcFJwDQowdDVKVGdNTlVvWVNrakM0ZFN5UEJ5OUhRTXhSN09pZzNNTnpZZXVDOTBzWXZ2NkdKNG45c3FReGNqK2FEYzNnDQpiRHhGWlY5UXUxOVcrekNnTFAyNWFxc2MzUjUyYzBkRWJCeVpWRWoydTM2VTdvMnNnRVJQVml2M053OXFjZlpFDQptVFovK1VROXl1WXJmOWFLYzBxU1U1cVZvdXp4MW5HOVRRYlgvNWdoWmdtd1VMUkxUaWcyb3dBaWJEMDVKVTBlDQpheW5TQ2JtRUprZElQeDVkckt6YmFCOVJLSi8vanJrcG1VU0NPOEI5UmpSVlptbUlJdHhkbjI4cHlEeTdBOEpYDQpYWXdCRlFJZnRDQjFXUGl4eHJsaVRpWXJRb3RLZ0s0VDdBL3l0VGF5Rk10YU12QnFNN291bGo1djNQb3djZlpqDQpoa2V6YU5Qc1J4NGNMU0cvOVBjMDJRMEVIQ2pMemw4UzhGOC9tMDZuall1OWtQZEc3N3VWMjVvdlNhTnluQm00DQpqZjE3UDUyUDV6cVB3V1FzT01PdTUxT1REaHlhZ0RoMXFWSmF5cjRrOXNrQXBJeVlFQlRzaEJCdU93clAvbnhGDQpGOFNETm41d2pzWXBVSXM9DQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t" | nindent 4 }}
  credentialsRef:
    name: {{ .Values.simulator.secretName | default "adcs-sim-secret" }} # secret with username and password
  statusCheckInterval: 1m
  retryInterval: 1m
  url: https://{{ .Values.simulator.serviceName }}.{{ .Release.Namespace }}.svc:{{ .Values.simulator.servicePort }} # external host
  templateName: BasicSSLWebServer # external template

{{- end }}
