categories:
- cicd
questions:
- variable: global.sonarqubeApp.enabled
  default: true
  label: Deploy Sonarqube
  group: "Components"
  type: boolean
  show_subquestion_if: true
  subquestions:
  - variable: sonarqube.params.customImage.sonarqube
    default: false
    label: Change SonarQube image
    group: "SonarQube settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: sonarqube.image.repository
      default: "sonarqube"
      label: SonarQube image repository
      description: "SonarQube image repository"
      group: "SonarQube settings"
      type: string
    - variable: sonarqube.image.tag
      label: SonarQube image tag
      description: "SonarQube image tag"
      group: "SonarQube settings"
      type: string
      required: false
    - variable: sonarqube.image.pullPolicy
      default: "IfNotPresent"
      label: SonarQube image pullPolicy
      description: "SonarQube image pullPolicy"
      group: "SonarQube settings"
      type: enum
      options:
      - "Always"
      - "If NotPresent"
      - "Never"
  - variable: sonarqube.account.adminPassword
    default: "admin"
    label: SonarQube admin password
    description: "SonarQube admin password"
    group: "SonarQube settings"
    type: string  
    required: false
  - variable: sonarqube.ingress.enabled
    default: "true"
    label: Enable SonarQube ingress
    group: "SonarQube settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: sonarqube.ingress.hosts.0.name
      default: "sonarqube.apps.example.com"
      label: URL
      description: "SonarQube ingress URL"
      group: "SonarQube settings"
      type: string
      required: true
  - variable: sonarqube.persistence.enabled
    default: true
    label: SonarQube persistent storage
    group: "SonarQube settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: sonarqube.persistence.size
      default: "5Gi"
      label: SonarQube persistent volume size
      group: "SonarQube settings"
      type: string
      required: true
    - variable: sonarqube.persistence.storageClass
      label: SonarQube persistent volume Storage Class
      group: "SonarQube settings"
      type: storageclass
      required: false
  - variable: sonarqube.params.customResources.sonarqube
    default: false
    label: Modify SonarQube resource consumption
    group: "SonarQube settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: sonarqube.resources.limits.cpu
      label: Milicore limit for a SonarQube instance
      description: "1000m(milicores) = 1vCPU"
      group: "SonarQube settings"
      type: string
      required: false
    - variable: sonarqube.resources.requests.cpu
      label: Milicore requests for a SonarQube instance
      description: "1000m(milicores) = 1vCPU, value must be <= milicore limit"
      group: "SonarQube settings"
      type: string
      required: false
    - variable: sonarqube.resources.limits.memory
      label: Memory limit for a SonarQube instance
      description: "Memory limit for a SonarQube instance"
      group: "SonarQube settings"
      type: string
      required: false
    - variable: sonarqube.resources.requests.memory
      label: Memory requests for a SonarQube instance
      description: "Memory request, value must be <= memory limit"
      group: "SonarQube settings"
      type: string
      required: false
  - variable: sonarqube.params.customPasswords.postgresql
    default: false
    label: Change Postgresql DB configuration
    description: "Change Postgresql DB configuration"
    group: "SonarQube settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: sonarqube.postgresql.postgresqlDatabase
      default: "sonarDB"
      label: SonarQube DB name
      description: "SonarQube DB name"
      group: "SonarQube settings"
      type: string
    - variable: sonarqube.postgresql.postgresqlUsername
      default: "sonarUser"
      label: SonarQube DB username
      description: "SonarQube DB username"
      group: "SonarQube settings"
      type: string
    - variable: sonarqube.postgresql.postgresqlPassword
      default: "sonarPass"
      label: SonarQube DB password
      description: "SonarQube DB password"
      group: "SonarQube settings"
      type: string
  - variable: sonarqube.params.customResources.postgresql
    default: false
    label: Modify Postgresql resource consumption
    group: "SonarQube settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: sonarqube.postgresql.persistence.size
      default: "20Gi"
      label: Postgresql persistent volume size
      description: "Postgresql persistent volume size"
      group: "SonarQube settings"
      type: string
    - variable: sonarqube.postgresql.persistence.storageClass
      label: Postgresql persistent Storage Class
      description: "Postgresql persistent Storage Class"
      group: "SonarQube settings"
      type: storageclass
    - variable: sonarqube.postgresql.resources.limits.cpu
      default: "2000m"
      label: Milicore limit for a Postgresql instance
      description: "1000m(milicores) = 1vCPU"
      group: "SonarQube settings"
      type: string
    - variable: sonarqube.postgresql.resources.requests.cpu
      default: "100m"
      label: Milicore requests for a Postgresql instance
      description: "1000m(milicores) = 1vCPU, value must be <= milicore limit"
      group: "SonarQube settings"
      type: string
    - variable: sonarqube.postgresql.resources.limits.memory
      default: "2Gi"
      label: Memory limit for a Postgresql instance
      description: "Memory limit for a Postgresql instance"
      group: "SonarQube settings"
      type: string
    - variable: sonarqube.postgresql.resources.requests.memory
      default: "200Mi"
      label: Memory requests for a Postgresql instance
      description: "Memory request, value must be <= memory limit"
      group: "SonarQube settings"
      type: string
  - variable: sonarqube.postgresql.updateStrategy.type
    default: "RollingUpdate"
    label: SonarQube update strategy
    description: "SonarQube update strategy"
    group: "SonarQube settings"
    type: enum
    options:
    - "RollingUpdate"
    - "Recreate"
    required: false
  - variable: sonarqube.prometheusMonitoring.podMonitor.enabled
    default: true
    label: SonarQube metrics
    description: "SonarQube metrics"
    group: "SonarQube settings"
    type: boolean
  - variable: sonarqube.postgresql.metrics.enabled
    default: true
    label: Postgresql metrics
    description: "Postgresql metrics"
    group: "SonarQube settings"
    type: boolean

- variable: global.jenkinsApp.enabled
  default: true
  label: "Deploy Jenkins"
  type: boolean
  group: "Components"
  show_subquestion_if: true
  subquestions:
  - variable: jenkins.controller.admin.username
    label: Username
    description: "Username"
    group: "Jenkins Settings"
    type: string
    required: true
  - variable: jenkins.controller.admin.password
    label: Password
    description: "Password"
    group: "Jenkins Settings"
    type: string
    required: true
  - variable: jenkins.controller.ingress.enabled
    label: "Enable Ingress"
    description: "Enable Ingress"
    group: "Jenkins Settings"
    type: boolean
    default: false
    required: false
    show_subquestion_if: true
    subquestions:
    - variable: jenkins.controller.ingress.hostName
      label: "hostName"
      description: "hostName"
      group: "Jenkins Settings"
      type: string
      required: true
  - variable: jenkins.controller.customResources
    default: false
    label: "Modify resource consumption"
    type: boolean
    group: "Jenkins Settings"
    show_subquestion_if: true
    subquestions:
    - variable: jenkins.controller.resources.requests.memory
      label: "Memory request for Jenkins instance"
      description: "Memory request for Jenkins instance"
      group: "Jenkins Settings"
      type: string
      required: true
    - variable: jenkins.controller.resources.requests.cpu
      label: "Milicore request for Jenkins instance"
      description: "Milicore request for Jenkins instance"
      group: "Jenkins Settings"
      type: string
      required: true
    - variable: jenkins.controller.resources.limits.memory
      label: "Memory limit for Jenkins instance"
      description: "Memory limit for Jenkins instance"
      group: "Jenkins Settings"
      type: string
      required: true
    - variable: jenkins.controller.resources.limits.cpu
      label: "Milicore limit for Jenkins instance"
      description: "Milicore limit for Jenkins instance"
      group: "Jenkins Settings"
      type: string
      required: true
    - variable: jenkins.controller.persistence.size
      label: "Jenkins storage size"
      description: "Jenkins storage size"
      group: "Jenkins Settings"
      type: string
      required: true

- variable: global.forgejoApp.enabled
  default: "true"
  label: Deploy Forgejo
  group: "Components"
  type: boolean
  show_subquestion_if: true
  subquestions:
  - variable: forgejo.params.customImage.gitea
    default: "false"
    label: Change Forgejo image
    group: "Forgejo settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: forgejo.image.repository
      default: "forgejo/forgejo"
      label: Forgejo image repository
      description: "Forgejo image repository"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.image.registry
      default: "code.forgejo.org"
      label: Forgejo image registry
      description: "Forgejo image registry"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.image.tag
      default: ""
      label: Forgejo image tag
      description: "Forgejo image tag"
      group: "Forgejo settings"
      type: string
      required: false
    - variable: forgejo.image.pullPolicy
      default: "IfNotPresent"
      label: Forgejo image pullPolicy
      description: "Forgejo image pullPolicy"
      group: "Forgejo settings"
      type: enum
      options:
      - "Always"
      - "If NotPresent"
      - "Never"
  - variable: forgejo.gitea.admin.username
    default: "admin123"
    label: Forgejo admin username
    description: "Forgejo admin username"
    group: "Forgejo settings"
    type: string
    required: true
  - variable: forgejo.gitea.admin.password
    default: "admin123"
    label: Forgejo admin password
    description: "Forgejo admin password"
    group: "Forgejo settings"
    type: string  
    required: true
  - variable: forgejo.gitea.admin.email
    default: "admin@example.com"
    label: Forgejo admin email
    description: "Forgejo admin email"
    group: "Forgejo settings"
    type: string
    required: true
  - variable: forgejo.params.persistence.enabled
    default: "true"
    label: Forgejo persistent storage
    group: "Forgejo settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: forgejo.params.persistence.size
      default: "10Gi"
      label: Forgejo persistent volume size
      group: "Forgejo settings"
      type: string
      required: true
    - variable: forgejo.params.persistence.storageClass
      label: Forgejo persistent volume Storage Class
      group: "Forgejo settings"
      type: storageclass
      required: false
  - variable: forgejo.params.customResources.gitea
    default: "false"
    label: Modify Forgejo resource consumption
    group: "Forgejo settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: forgejo.resources.limits.cpu
      label: Milicore limit for a Forgejo instance
      description: "1000m(milicores) = 1vCPU"
      group: "Forgejo settings"
      type: string
      required: false
    - variable: forgejo.resources.requests.cpu
      label: Milicore requests for a Forgejo instance
      description: "1000m(milicores) = 1vCPU, value must be <= milicore limit"
      group: "Forgejo settings"
      type: string
      required: false
    - variable: forgejo.resources.limits.memory
      label: Memory limit for a Forgejo instance
      description: "Memory limit for a Forgejo instance"
      group: "Forgejo settings"
      type: string
      required: false
    - variable: forgejo.resources.requests.memory
      label: Memory requests for a Forgejo instance
      description: "Memory request, value must be <= memory limit"
      group: "Forgejo settings"
      type: string
      required: false
  - variable: forgejo.ingress.enabled
    default: "true"
    label: Enable Forgejo ingress
    group: "Forgejo settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: forgejo.ingress.hosts.0.host
      default: "forgejo.apps.example.com"
      label: URL
      description: "Forgejo ingress URL"
      group: "Forgejo settings"
      type: string
      required: true
  - variable: forgejo.strategy.type
    default: "RollingUpdate"
    label: Forgejo update strategy
    description: "Forgejo update strategy"
    group: "Forgejo settings"
    type: enum
    options:
    - "RollingUpdate"
    - "Recreate"
    required: false
  - variable: forgejo.params.customPasswords.postgresqlHA
    default: "false"
    label: Change Postgresql DB configuration
    description: "Change Postgresql DB configuration"
    group: "Forgejo settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: forgejo.postgresql-ha.postgresql.postgresPassword
      default: "changeme1"
      label: Postgresql admin password
      description: "Postgresql admin password"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.postgresql-ha.postgresql.repmgrPassword
      default: "changeme2"
      label: Postgresql repmgr password
      description: "Postgresql repmgr password"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.postgresql-ha.pgpool.adminPassword
      default: "changeme3"
      label: Postgresql pgpool admin password
      description: "Postgresql pgpool admin password"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.postgresql-ha.global.postgresql.database
      default: "gitea"
      label: Forgejo DB name
      description: "Forgejo DB name"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.postgresql-ha.global.postgresql.username
      default: "gitea"
      label: Forgejo DB username
      description: "Forgejo DB username"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.postgresql-ha.global.postgresql.password
      default: "gitea"
      label: Forgejo DB password
      description: "Forgejo DB password"
      group: "Forgejo settings"
      type: string
  - variable: forgejo.params.customResources.postgresqlHA
    default: "false"
    label: Modify Postgresql resource consumption
    group: "Forgejo settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: forgejo.postgresql-ha.persistence.size
      default: "8Gi"
      label: Postgresql persistent volume size
      description: "Postgresql persistent volume size"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.postgresql-ha.persistence.storageClass
      label: Postgresql persistent Storage Class
      description: "Postgresql persistent Storage Class"
      group: "Forgejo settings"
      type: storageclass
    - variable: forgejo.postgresql-ha.resources.limits.cpu
      default: "500m"
      label: Milicore limit for a Postgresql instance
      description: "1000m(milicores) = 1vCPU"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.postgresql-ha.resources.requests.cpu
      default: "250m"
      label: Milicore requests for a Postgresql instance
      description: "1000m(milicores) = 1vCPU, value must be <= milicore limit"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.postgresql-ha.resources.limits.memory
      default: "512Mi"
      label: Memory limit for a Postgresql instance
      description: "Memory limit for a Postgresql instance"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.postgresql-ha.resources.requests.memory
      default: "256Mi"
      label: Memory requests for a Postgresql instance
      description: "Memory request, value must be <= memory limit"
      group: "Forgejo settings"
      type: string
  - variable: forgejo.params.customResources.redisCluster
    default: "false"
    label: Modify Redis resource consumption
    group: "Forgejo settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: forgejo.redis-cluster.persistence.size
      default: "8Gi"
      label: Redis persistent volume size
      description: "Redis persistent volume size"
      group: "Forgejo settings"
      type: string
    - variable: forgejo.redis-cluster.persistence.storageClass
      label: Redis persistent Storage Class
      description: "Redis persistent Storage Class"
      group: "Forgejo settings"
      type: storageclass
    - variable: forgejo.redis-cluster.redis.resources.limits.cpu
      default: "200m"
      label: Milicore limit for a Redis instance
      description: "1000m(milicores) = 1vCPU"
      group: "Forgejo settings"
      type: string
      required: false
    - variable: forgejo.redis-cluster.redis.resources.requests.cpu
      default: "100m"
      label: Milicore requests for a Redis instance
      description: "1000m(milicores) = 1vCPU, value must be <= milicore limit"
      group: "Forgejo settings"
      type: string
      required: false
    - variable: forgejo.redis-cluster.redis.resources.limits.memory
      default: "256Mi"
      label: Memory limit for a Redis instance
      description: "Memory limit for a Redis instance"
      group: "Forgejo settings"
      type: string
      required: false
    - variable: forgejo.redis-cluster.redis.resources.requests.memory
      default: "128Mi"
      label: Memory request for a Redis instance
      description: "Memory request, value must be <= memory limit"
      group: "Forgejo settings"
      type: string
      required: false
  - variable: forgejo.gitea.metrics.enabled
    default: "true"
    label: Forgejo metrics
    description: "Forgejo metrics"
    group: "Forgejo settings"
    type: boolean
  - variable: forgejo.postgresql-ha.metrics.enabled
    default: "true"
    label: Postgresql metrics
    description: "Postgresql metrics"
    group: "Forgejo settings"
    type: boolean
  - variable: forgejo.redis-cluster.metrics.enabled
    default: "true"
    label: Redis metrics
    description: "Redis metrics"
    group: "Forgejo settings"
    type: boolean


- variable: global.harborApp.enabled
  default: false
  label: Deploy Harbor
  group: "Components"
  type: boolean
  #show_subquestion_if: true

- variable: global.coderApp.enabled
  default: "true"
  label: Deploy Coder
  type: boolean
  group: "Components"
  show_subquestion_if: true
  subquestions:
  - variable: postgresql.auth.username
    label: SuperUser name
    description: "Username for PostgreSQL SuperUser role"
    group: "Coder Settings"
    type: string
    default: "coder"
    required: true
  - variable: postgresql.auth.password
    label: SuperUser password
    description: "Password for PostgreSQL SuperUser role"
    group: "Coder Settings"
    type: password
    min: 8
    required: true
  - variable: postgresql.auth.database
    label: Postgresql database name
    description: "Name for PostgreSQL database"
    group: "Coder Settings"
    type: string
    default: "coder"
    required: true
  - variable: postgresql.persistence.size
    label: Database size
    description: "Size database data"
    group: "Coder Settings"
    type: string
    default: "10Gi"
  - variable: coder.params.ingress.enabled
    default: "true"
    label: Enable web console for Coder
    group: "Coder Settings"
    type: boolean
    show_subquestion_if: true
    subquestions:
    - variable: coder.params.ingress.host
      label: URL
      description: "Configure url for coder web-ui"
      group: "Coder Settings"
      type: string
      default: "coder.my.domain.internal"
      min: 6
