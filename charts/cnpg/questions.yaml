questions:
# General
- variable: global.deploymentMode
  label: "PostgreSQL Deployment Mode"
  description: "Choose the deployment mode for PostgreSQL"
  type: enum
  options:
    create: Create New Cluster
    import: Import Existing Cluster
    recovery: Recover Existing Cluster
  default: "create"
  group: "General"
  subquestions:

  # Import Subquestions
  - variable: global.import.sourceName
    label: "Source Database Name"
    description: "Name of the source database to import from"
    type: "string"
    required: true
    group: "Import"
    show_if: "global.deploymentMode=import"
  - variable: global.import.sourceNamespace
    label: "Source Namespace"
    description: "Kubernetes namespace of the source database"
    type: "string"
    required: true
    group: "Import"
    show_if: "global.deploymentMode=import"
  - variable: global.import.sourceServiceName
    label: "Source Service Name"
    description: "Service name of the source database"
    type: "string"
    required: true
    group: "Import"
    show_if: "global.deploymentMode=import"
  - variable: global.import.sourcePgAppUser
    label: "Source PostgreSQL Application Username"
    description: "Username to connect to the source PostgreSQL database"
    type: "string"
    required: true
    group: "Import"
    show_if: "global.deploymentMode=import"
  - variable: global.import.sourcePgAppPass
    label: "Source PostgreSQL Application Password"
    description: "Password to connect to the source PostgreSQL database"
    type: "password"
    required: true
    group: "Import"
    show_if: "global.deploymentMode=import"

  # Recovery Subquestions
  - variable: global.recovery.serverName
    label: "Recovery Server Name"
    description: "Name of the PostgreSQL server for recovery"
    type: "string"
    default: "postgresql-test"
    required: true
    group: "Recovery"
    show_if: "global.deploymentMode=recovery"
  - variable: global.recovery.nameSuffix
    label: "Recovery Name Suffix"
    description: "Suffix to append to the recovery deployment name"
    type: "string"
    default: "recovery"
    required: true
    group: "Recovery"
    show_if: "global.deploymentMode=recovery"
  - variable: global.recovery.pitr.enabled
    label: "Enable Point-in-Time Recovery"
    description: "Enable Point-in-Time Recovery functionality"
    type: "boolean"
    default: false
    required: true
    group: "Recovery"
    show_if: "global.deploymentMode=recovery"
  - variable: global.recovery.pitr.datetime
    label: "Recovery Point-in-Time"
    description: "Date and time to recover the database to (when PITR is enabled)"
    type: "date"
    required: false
    show_if: "global.recovery.pitr.enabled=true && global.deploymentMode=recovery"
    group: "Recovery"

# General
- variable: nameOverride
  label: "Deployment Name"
  description: "Override the name of the PostgreSQL deployment"
  type: "string"
  default: "postgresql-test"
  required: true
  group: "General"
- variable: namespaceOverride
  label: "Namespace"
  description: "Override the namespace for the PostgreSQL deployment"
  type: "string"
  default: "rk-test"
  required: true
  group: "General"

# Database users
- variable: global.users.pgAppUser
  label: "PostgreSQL Application Username"
  description: "Username for application to connect to PostgreSQL"
  type: "string"
  required: true
  group: "Users"
- variable: global.users.pgAppPass
  label: "PostgreSQL Application Password"
  description: "Password for application to connect to PostgreSQL"
  type: "password"
  required: true
  group: "Users"
- variable: global.users.pgAdmUser
  label: "PostgreSQL Admin Username"
  description: "Admin username for PostgreSQL management"
  type: "string"
  required: true
  group: "Users"
- variable: global.users.pgAdmPass
  label: "PostgreSQL Admin Password"
  description: "Admin password for PostgreSQL management"
  type: "password"
  required: true
  group: "Users"

# Backup
- variable: global.backup.enabled
  label: "Enable Backup"
  description: "Enable backup functionality for PostgreSQL"
  type: "boolean"
  default: false
  required: true
  group: "Backup"
- variable: global.backup.s3url
  label: "S3 URL"
  description: "URL of the S3-compatible storage service"
  type: "string"
  required: false
  show_if: "global.backup.enabled=true"
  group: "Backup"
- variable: global.backup.s3bucket
  label: "S3 Bucket"
  description: "Bucket name in the S3-compatible storage"
  type: "string"
  required: false
  show_if: "global.backup.enabled=true"
  group: "Backup"
- variable: global.backup.s3access
  label: "S3 Access Key"
  description: "Access key for the S3-compatible storage"
  type: "string"
  required: false
  show_if: "global.backup.enabled=true"
  group: "Backup"
- variable: global.backup.s3secret
  label: "S3 Secret Key"
  description: "Secret key for the S3-compatible storage"
  type: "password"
  required: false
  show_if: "global.backup.enabled=true"
  group: "Backup"
- variable: global.backup.s3ca
  label: "S3 CA Certificate"
  description: "CA certificate for S3 connection (if needed)"
  type: "multiline"
  required: false
  show_if: "global.backup.enabled=true"
  group: "Backup"

# Workloads
- variable: cnpg.instances
  label: "Number of Instances"
  description: "Number of PostgreSQL instances in the cluster"
  type: "int"
  default: 3
  min: 1
  required: true
  group: "Workloads"
- variable: cnpg.minSyncReplicas
  label: "Minimum Synchronous Replicas"
  description: "Minimum number of synchronous replicas"
  type: "int"
  default: 1
  min: 0
  required: true
  group: "Workloads"
- variable: cnpg.maxSyncReplicas
  label: "Maximum Synchronous Replicas"
  description: "Maximum number of synchronous replicas"
  type: "int"
  default: 2
  min: 0
  required: true
  group: "Workloads"
- variable: cnpg.replicationSlots.highAvailability.enabled
  label: "Enable High Availability Replication Slots"
  description: "Enable high availability replication slots"
  type: "boolean"
  default: true
  required: true
  group: "Workloads"

# Apps
- variable: cnpg.postgresql.parameters.max_connections
  label: "Max Connections"
  description: "Maximum number of database connections allowed"
  type: "string"
  default: "100"
  required: true
  group: "Apps"
- variable: cnpg.postgresql.parameters.superuser_reserved_connections
  label: "Superuser Reserved Connections"
  description: "Number of connections reserved for superusers"
  type: "string"
  default: "3"
  required: true
  group: "Apps"
- variable: cnpg.postgresql.parameters.shared_buffers
  label: "Shared Buffers"
  description: "Amount of memory dedicated to shared buffers"
  type: "string"
  default: "256MB"
  required: true
  group: "Apps"
- variable: cnpg.postgresql.parameters.timezone
  label: "Timezone"
  description: "PostgreSQL server timezone"
  type: "string"
  default: "Europe/Warsaw"
  required: true
  group: "Apps"

# Resources
- variable: cnpg.resources.requests.memory
  label: "Memory Request"
  description: "Memory resource request for PostgreSQL pods"
  type: "string"
  default: "512Mi"
  required: true
  group: "Resources"
- variable: cnpg.resources.requests.cpu
  label: "CPU Request"
  description: "CPU resource request for PostgreSQL pods"
  type: "string"
  default: "500m"
  required: true
  group: "Resources"
- variable: cnpg.resources.limits.memory
  label: "Memory Limit"
  description: "Memory resource limit for PostgreSQL pods"
  type: "string"
  default: "512Mi"
  required: true
  group: "Resources"
- variable: cnpg.resources.limits.cpu
  label: "CPU Limit"
  description: "CPU resource limit for PostgreSQL pods"
  type: "string"
  default: "500m"
  required: true
  group: "Resources"

# Storage
- variable: cnpg.storage.storageClass
  label: "Storage Class"
  description: "Kubernetes storage class for PostgreSQL data"
  type: "string"
  default: "bs-vsphere-c1"
  required: true
  group: "Storage"
- variable: cnpg.storage.size
  label: "Storage Size"
  description: "Size of the persistent volume for PostgreSQL data"
  type: "string"
  default: "2Gi"
  required: true
  group: "Storage"
- variable: cnpg.storage.resizeInUseVolumes
  label: "Allow Storage Resize"
  description: "Allow resizing of in-use persistent volumes"
  type: "boolean"
  default: true
  required: true
  group: "Storage"
- variable: cnpg.walStorage.size
  label: "WAL Storage Size"
  description: "Size of the persistent volume for PostgreSQL WAL"
  type: "string"
  default: "1Gi"
  required: true
  group: "Storage"
- variable: cnpg.walStorage.resizeInUseVolumes
  label: "Allow WAL Storage Resize"
  description: "Allow resizing of in-use WAL persistent volumes"
  type: "boolean"
  default: true
  required: true
  group: "Storage"

# Monitoring
- variable: cnpg.monitoring.enablePodMonitor
  label: "Enable Pod Monitoring"
  description: "Enable Prometheus PodMonitor for PostgreSQL pods"
  type: "boolean"
  default: true
  required: true
  group: "Monitoring"